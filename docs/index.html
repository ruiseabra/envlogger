<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Read, process and plot EnvLogger data • envlogger</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Read, process and plot EnvLogger data">
<meta property="og:description" content="Functions to handle EnvLogger data (&lt;https://electricblue.eu/temperature-envloggers&gt; or &lt;https://electricblue.eu/relative-humidity-loggers&gt;), from reading, processing and plotting. If data conforms to the CCTBON naming scheme, additional functionalities are available. ElectricBlue is a non-profit technology transfer startup creating research-oriented solutions for the scientific community (&lt;https://electricblue.eu&gt;).">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">envlogger</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ruiseabra/envlogger/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="envlogger">envlogger<a class="anchor" aria-label="anchor" href="#envlogger"></a>
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>Functions to handle EnvLogger data, from reading, processing and plotting.<br>
If data conforms to the CCTBON naming scheme, additional functionalities are available.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of <strong>envlogger</strong> from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"ruiseabra/envlogger"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="load-envlogger">Load envlogger<a class="anchor" aria-label="anchor" href="#load-envlogger"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ruiseabra/envlogger" class="external-link">envlogger</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example-data">Example data<a class="anchor" aria-label="anchor" href="#example-data"></a>
</h2>
<p>The package <strong>envlogger</strong> comes bundled with example data, including modified files that exemplify issues that the package’s functions can handle automatically. Use this dataset to get familiarized with the package’s capabilities.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># files included</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="reference/env_example.html">env_example</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">basename</span><span class="op">)</span></span>
<span><span class="co">#&gt; $log</span></span>
<span><span class="co">#&gt; [1] "log_2024-06-05_063724.csv"         "log_2025-01-31_093212.csv"        </span></span>
<span><span class="co">#&gt; [3] "log_2024-05-25_095701.csv"         "log_2024-01-12_082832_bad_col.csv"</span></span>
<span><span class="co">#&gt; [5] "log_2025-01-14_070601.csv"        </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $metadata</span></span>
<span><span class="co">#&gt; [1] "improper_file_name_meta.csv"                          </span></span>
<span><span class="co">#&gt; [2] "issuemh04a_0434_ef00_4b29_0a-20240116_132500_meta.csv"</span></span>
<span><span class="co">#&gt; [3] "4c0000002418fb41_meta.csv"                            </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $report</span></span>
<span><span class="co">#&gt;  [1] "humidsc01a-0482_ac00_f27d_01-20250506_095113.csv"        </span></span>
<span><span class="co">#&gt;  [2] "improper_file_name.csv"                                  </span></span>
<span><span class="co">#&gt;  [3] "issuemh04a_0434_ef00_4b29_0a-20240116_132500.csv"        </span></span>
<span><span class="co">#&gt;  [4] "issuemc01a-04ad_e500_302d_06-20240525_101116_no_data.csv"</span></span>
<span><span class="co">#&gt;  [5] "issuemc02a-04b4_3e00_c90f_0e-20240525_101121_low.csv"    </span></span>
<span><span class="co">#&gt;  [6] "issuemh01a-04d3_5e00_b818_02-20240525_095727_gap.csv"    </span></span>
<span><span class="co">#&gt;  [7] "issuemh02a-0449_0c00_2310_05-20240525_095804_1970.csv"   </span></span>
<span><span class="co">#&gt;  [8] "4c0000002418fb41.txt"                                    </span></span>
<span><span class="co">#&gt;  [9] "nozzzmc01a-0425_e500_051e_0b-20240605_063737.csv"        </span></span>
<span><span class="co">#&gt; [10] "nozzzmc02a-04da_2800_d33a_0d-20240605_063925.csv"        </span></span>
<span><span class="co">#&gt; [11] "nozzzmh01a-04fd_0b00_3805_0e-20240605_064147.csv"        </span></span>
<span><span class="co">#&gt; [12] "nozzzmh02a-04a5_bb00_521c_0f-20240605_064246.csv"        </span></span>
<span><span class="co">#&gt; [13] "pressmc01b-0405_f000_5411_01-20250131_093703.csv"        </span></span>
<span><span class="co">#&gt; [14] "ptzzwmc01a-04ad_e500_302d_06-20240525_101015.csv"        </span></span>
<span><span class="co">#&gt; [15] "ptzzwmc02a-04b4_3e00_c90f_0e-20240525_101121.csv"        </span></span>
<span><span class="co">#&gt; [16] "ptzzwmh01a-04d3_5e00_b818_02-20240525_095727.csv"        </span></span>
<span><span class="co">#&gt; [17] "ptzzwmh02a-0449_0c00_2310_05-20240525_095804.csv"        </span></span>
<span><span class="co">#&gt; [18] "ptzzymc01a-04ce_ce00_4114_06-20240112_084047.csv"        </span></span>
<span><span class="co">#&gt; [19] "ptzzymc02a-04cb_8f00_e758_05-20240112_083906.csv"        </span></span>
<span><span class="co">#&gt; [20] "ptzzymh01a-04dc_6700_dd59_0f-20240112_082904.csv"        </span></span>
<span><span class="co">#&gt; [21] "ptzzymh02a-04cb_cc00_1507_0c-20240112_083030.csv"        </span></span>
<span><span class="co">#&gt; [22] "ptzzymc01a-04ce_ce00_4114_06-20250114_111522.csv"        </span></span>
<span><span class="co">#&gt; [23] "ptzzymc02a-14cb_8f00_e758_05-20250114_111020.csv"        </span></span>
<span><span class="co">#&gt; [24] "ptzzymh01a-04dc_6700_dd59_0f-20250114_111804.csv"        </span></span>
<span><span class="co">#&gt; [25] "ptzzymh02a-04cb_cc00_1507_0c-20250114_111701.csv"        </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $unsupported</span></span>
<span><span class="co">#&gt; [1] "unsupported_file_1.csv" "unsupported_file_2.csv" "unsupported_file_3.txt"</span></span>
<span><span class="co">#&gt; [4] "670000002f037841.txt"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="read-data">Read data<a class="anchor" aria-label="anchor" href="#read-data"></a>
</h2>
<p>Use <code><a href="reference/read_env.html">read_env()</a></code> to import EnvLogger data into R. Supported files include: * EnvLogger data report files with data (not just the header) * EnvLogger log files * EnvLogger metadata files (created with <code>create_metadata_file()</code>) * Other data report files originating from devices other than EnvLoggers, as long as they are accompanied by an EnvLogger metadata file with values set for fields required for their correct interpretation</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># here we use the package's example data, specifically </span></span>
<span><span class="co">#  targeting data from site "nozzz" (a rocky shore in Norway)</span></span>
<span><span class="va">env</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_env.html">read_env</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="reference/env_example.html">env_example</a></span><span class="op">(</span><span class="st">"nozzz"</span><span class="op">)</span>, </span>
<span>  show_progress <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>  show_warnings <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>  log_summary <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Logfile data contains a record of all interactions with EnvLoggers. It is useful mainly for tracing back experimental errors or recovering a forgotten logger password.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">env</span><span class="op">$</span><span class="va">log</span></span>
<span><span class="co">#&gt; # A tibble: 9 × 8</span></span>
<span><span class="co">#&gt;   time                id         serial            v_log   int   res pass  dev  </span></span>
<span><span class="co">#&gt;   &lt;dttm&gt;              &lt;chr&gt;      &lt;chr&gt;             &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1 2024-06-05 05:39:52 nozzzmc04a 0420 1b00 e501 07   7.3  3600   0.1 1111  armo…</span></span>
<span><span class="co">#&gt; 2 2024-06-05 05:41:01 nozzzmc05a 0480 1800 9d55 0b   7.3  3600   0.1 1111  armo…</span></span>
<span><span class="co">#&gt; 3 2024-06-05 05:41:49 nozzzmh01a 04fd 0b00 3805 0e   7.3  3600   0.1 1111  armo…</span></span>
<span><span class="co">#&gt; 4 2024-06-05 05:42:48 nozzzmh02a 04a5 bb00 521c 0f   7.3  3600   0.1 1111  armo…</span></span>
<span><span class="co">#&gt; 5 2024-06-05 05:43:28 nozzzmh03a 04e0 0400 5c02 0b   7.3  3600   0.1 1111  armo…</span></span>
<span><span class="co">#&gt; 6 2024-06-05 05:48:16 nozzzmh04a 0464 8b00 205c 03   7.3  3600   0.1 1111  armo…</span></span>
<span><span class="co">#&gt; 7 2024-06-05 05:49:51 nozzzmh05a 0410 0100 3404 07   7.3  3600   0.1 1111  armo…</span></span>
<span><span class="co">#&gt; 8 2024-06-05 05:50:31 nozzzmc02a 04da 2800 d33a 0d   7.3  3600   0.1 1111  armo…</span></span>
<span><span class="co">#&gt; 9 2024-06-05 05:51:35 nozzzmc02a 0425 e500 051e 0b   7.3  3600   0.1 1111  armo…</span></span></code></pre></div>
<p>Reports comprise the data collected by each logger. Depending on the params used, data may be shown separately for each data file, or joined by serial or even by id.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">env</span><span class="op">$</span><span class="va">report</span></span>
<span><span class="co">#&gt; # A tibble: 4 × 12</span></span>
<span><span class="co">#&gt;   id         serial           type  v_log press hum   data      nrow   min   max</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;            &lt;chr&gt; &lt;chr&gt; &lt;lgl&gt; &lt;lgl&gt; &lt;list&gt;   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 nozzzmc01a 0425 e500 051e … t     7.3   FALSE FALSE &lt;tibble&gt;  6425  -1.8  14  </span></span>
<span><span class="co">#&gt; 2 nozzzmc02a 04da 2800 d33a … t     7.3   FALSE FALSE &lt;tibble&gt;  6425  -2.2  15.4</span></span>
<span><span class="co">#&gt; 3 nozzzmh01a 04fd 0b00 3805 … t     7.3   FALSE FALSE &lt;tibble&gt;  6425  -3.7  38.8</span></span>
<span><span class="co">#&gt; 4 nozzzmh02a 04a5 bb00 521c … t     7.3   FALSE FALSE &lt;tibble&gt;  6425  -4.1  38.8</span></span>
<span><span class="co">#&gt; # ℹ 2 more variables: t0 &lt;dttm&gt;, t1 &lt;dttm&gt;</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="handling-issues-and-unsupported-files">Handling issues and unsupported files<a class="anchor" aria-label="anchor" href="#handling-issues-and-unsupported-files"></a>
</h2>
<p>As datasets of environmental data grow larger, the occurrence of data report files that contain errors or follow different field formats becomes inevitable. Most errors tend to be benign, meaning that they hardly impact data quality and mainly just cause programming issues that prevent their easy and automatic interpretation. Examples of such errors include the presence of gaps, <code>NA</code>s in the time or data fields, or spurious temperatures outside realistic ranges (-80 °C), which are indicative of momentary/permanent logger faults. In such cases, <strong>envlogger</strong> can identify the issue and suggest a correction. Suggested corrections are only implemented automatically upon explicit command from the user, as doing otherwise could introduce changes to the data to which the user would be unaware (very unlikely, but unacceptable). On the other hand, there are instances when errors are complex and <strong>envlogger</strong> won’t be able to identify what exactly is wrong. A third situation involves the importing of data that wasn’t generated by EnvLoggers, and that therefore follows a different data organization format.</p>
<p>To handle most of the abovementioned situations, the <strong>envlogger</strong> package relies on metadata files. Metadata files are companion files - one per data file with issues - that contain information that ensures that the data file they are paired with can be properly imported. For benign errors, those files can be generated automatically by calling <code>read_env(..., auto_generate_fixes = TRUE, auto_implement_fixes = TRUE)</code>. In that case, if issues are detected that the <strong>envlogger</strong> knows how to handle, new metadata files are created. Subsequent data imports using <code>read_env(apply_fixes = TRUE)</code> will result in those metadata files being read and the information they contain being used to correct all issues. This means that once a metadata file is created, so long that the metadata file is kept together with the its companion file, the issue(s) it targets will cease to be reported during any subsequent data imports - it is “fixed”. For files with different data layout formats, a metadata file must be created manually with a call to <code><a href="reference/metadata_create_file.html">metadata_create_file()</a></code> and, at a minimum, values for <code>id</code>, <code>skip</code>, <code>time_format</code>, and <code>sep_dec_comma</code> need to be set.</p>
<p>While relying on companion metadata files may seem a cumbersome approach, it ensures that the original data remains unaltered, preserving data integrity and guaranteeing that fixes can be reassessed - and even reversed - at any moment, even many years after. This aspect is so crucial, that it alone justifies the use of metadatada files.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">issues</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_env.html">read_env</a></span><span class="op">(</span><span class="fu"><a href="reference/env_example.html">env_example</a></span><span class="op">(</span><span class="st">"issue"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; ℹ found 11 files in 2 folders</span></span>
<span><span class="co">#&gt; ✔ files read (n = 7) [5 reports, 2 metadata]</span></span>
<span><span class="co">#&gt; ✔ fix details found and applied (n = 2)</span></span>
<span><span class="co">#&gt; ℹ quality checks failed by some reports (n = 3/5)</span></span>
<span><span class="co">#&gt; ✔ RTC clock drifts corrected</span></span>
<span><span class="co">#&gt; ✔ no reports to join by serial</span></span>
<span><span class="co">#&gt; ✔ no reports to join by id</span></span>
<span><span class="co">#&gt; Warning: ℹ issues detected (total n = 7)</span></span>
<span><span class="co">#&gt; ℹ type ?create_metadata_file() to learn more about the issues listed below</span></span>
<span><span class="co">#&gt; ℹ access paths to files with unresolved issues using $files_with_issues</span></span>
<span><span class="co">#&gt; ℹ access paths to newly created metadata files using $files_created</span></span>
<span><span class="co">#&gt;   </span></span>
<span><span class="co">#&gt; ✖ issues that remain unresolved (total n = 7)</span></span>
<span><span class="co">#&gt; → unsupported/no data files have not be imported</span></span>
<span><span class="co">#&gt; → files with quality issues have not be imported (issues must be resolved</span></span>
<span><span class="co">#&gt;   first)</span></span>
<span><span class="co">#&gt; unsupported_file_1.csv ..............................................</span></span>
<span><span class="co">#&gt; (unsupported)</span></span>
<span><span class="co">#&gt; unsupported_file_2.csv ..............................................</span></span>
<span><span class="co">#&gt; (unsupported)</span></span>
<span><span class="co">#&gt; unsupported_file_3.txt ..............................................</span></span>
<span><span class="co">#&gt; (unsupported)</span></span>
<span><span class="co">#&gt; issuemc01a-04ad_e500_302d_06-20240525_101116_no_data.csv ............ (no data)</span></span>
<span><span class="co">#&gt; issuemc02a-04b4_3e00_c90f_0e-20240525_101121_low.csv ................ (min)</span></span>
<span><span class="co">#&gt; issuemh01a-04d3_5e00_b818_02-20240525_095727_gap.csv ................ (time gap</span></span>
<span><span class="co">#&gt; @ 2023-05-04 03:00:00)</span></span>
<span><span class="co">#&gt; issuemh02a-0449_0c00_2310_05-20240525_095804_1970.csv ...............</span></span>
<span><span class="co">#&gt; (tmin,time gap neg @ 2023-06-14 23:00:00)</span></span>
<span><span class="co">#&gt; </span></span></code></pre></div>
<p>As can be seen, the function <code><a href="reference/read_env.html">read_env()</a></code> provides detailed feedback about issues present in the data (set <code>show_warnings</code> to <code>FALSE</code> to disable that). Crucially, the output also contains the paths to the files with issues, and that can be used to make the creation of the metadata files easier.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a metadata file</span></span>
<span><span class="va">new_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/metadata_create_file.html">metadata_create_file</a></span><span class="op">(</span></span>
<span>  <span class="va">issues</span><span class="op">$</span><span class="va">files_with_issues</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, </span>
<span>  new_vals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>id <span class="op">=</span> <span class="st">"new_id"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># metadata_create_file() outputs the path to the new file created</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="va">new_file</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="parsing-information-contained-in-logger-ids">Parsing information contained in logger ids<a class="anchor" aria-label="anchor" href="#parsing-information-contained-in-logger-ids"></a>
</h2>
<p>If used in a thoughtful way, logger custom names (hereafter referred as <code>ids</code>) can greatly reduce the difficulty of organizing the data collected with EnvLoggers, especially for large networks comprising data from dozens or even hundreds of loggers. While logger ids are restricted to 10 characters, a lot of important details can be coded into those ids.</p>
<p>The example data included has been collected using some of the ~3000 EnvLoggers of the CCTBON network (&lt;www.coastalwarming.com/cctbon&gt;), and therefore the custom names are set according to the CCTBON naming scheme. Specifically, CCTBON names are composed of: * 5 characters for site name (2 characters for country, 3 for site); THIS MUST BE UNIQUE WITHIN THE NETWORK * 2 characters for microhabitat type (in this case, one character codes shore height, the other the level of exposure to solar radiation) * 3 characters for replicate number (2 digits for replicate number, 1 character for device replacements)</p>
<p>In the example above we have four loggers from site “nozzz” (no = Norway + zzz = site ZZZ), all installed at the mid-shore level (m), half in areas of the shore with maximum local solar exposure (h = hot; we don’t use north/south because that doesn’t work across hemispheres) and the other half in crevices and other shaded areas (c = cold). There are 2 replicates in each microhabitat.</p>
<p>When the naming scheme used matches the CCTBON scheme, using the function <code><a href="reference/parse_id.html">parse_id_cctbon()</a></code> generates new columns coding for site, level, exposure and replicate number. These will be important for subsequent analyses of the dataset that rely on the grouping of data based on those attributes.</p>
<p>In alternative, if the naming scheme is different, <code><a href="reference/parse_id.html">parse_id()</a></code> provides a less immediate but more flexible way to parse logger ids.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># when logger ids follow a different naming scheme, ids can still be parsed</span></span>
<span><span class="co"># note the new columns site, mic and rep</span></span>
<span><span class="co"># note as well that parse_id acccepts "env" as a list or as a tibble (env$report), </span></span>
<span><span class="co">#  but, in both cases, the output consists only of env$report</span></span>
<span><span class="fu"><a href="reference/parse_id.html">parse_id</a></span><span class="op">(</span></span>
<span>  <span class="va">env</span>, </span>
<span>  div <span class="op">=</span> <span class="st">"1111122333"</span>, </span>
<span>  fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    site <span class="op">=</span> <span class="st">"fct"</span>, </span>
<span>    mic <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mc"</span>, <span class="st">"mh"</span><span class="op">)</span>, </span>
<span>    rep <span class="op">=</span> <span class="st">"chr"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 4 × 15</span></span>
<span><span class="co">#&gt;   id       serial site  mic   rep   type  v_log press hum   data      nrow   min</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;  &lt;fct&gt; &lt;fct&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;lgl&gt; &lt;lgl&gt; &lt;list&gt;   &lt;int&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 nozzzmc… 0425 … nozzz mc    01a   t     7.3   FALSE FALSE &lt;tibble&gt;  6425  -1.8</span></span>
<span><span class="co">#&gt; 2 nozzzmc… 04da … nozzz mc    02a   t     7.3   FALSE FALSE &lt;tibble&gt;  6425  -2.2</span></span>
<span><span class="co">#&gt; 3 nozzzmh… 04fd … nozzz mh    01a   t     7.3   FALSE FALSE &lt;tibble&gt;  6425  -3.7</span></span>
<span><span class="co">#&gt; 4 nozzzmh… 04a5 … nozzz mh    02a   t     7.3   FALSE FALSE &lt;tibble&gt;  6425  -4.1</span></span>
<span><span class="co">#&gt; # ℹ 3 more variables: max &lt;dbl&gt;, t0 &lt;dttm&gt;, t1 &lt;dttm&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># however, when logger ids conform to the CCTBON naming scheme, parsing ids is much simpler</span></span>
<span><span class="co"># note the new columns site, lvl, exp, rep1 and rep2</span></span>
<span><span class="op">(</span><span class="va">env</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/parse_id.html">parse_id_cctbon</a></span><span class="op">(</span><span class="va">env</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 4 × 17</span></span>
<span><span class="co">#&gt;   id       serial site  lvl   exp    rep1 rep2  type  v_log press hum   data    </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;    &lt;chr&gt;  &lt;fct&gt; &lt;fct&gt; &lt;fct&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;lgl&gt; &lt;lgl&gt; &lt;list&gt;  </span></span>
<span><span class="co">#&gt; 1 nozzzmc… 0425 … nozzz m     c         1 a     t     7.3   FALSE FALSE &lt;tibble&gt;</span></span>
<span><span class="co">#&gt; 2 nozzzmc… 04da … nozzz m     c         2 a     t     7.3   FALSE FALSE &lt;tibble&gt;</span></span>
<span><span class="co">#&gt; 3 nozzzmh… 04fd … nozzz m     h         1 a     t     7.3   FALSE FALSE &lt;tibble&gt;</span></span>
<span><span class="co">#&gt; 4 nozzzmh… 04a5 … nozzz m     h         2 a     t     7.3   FALSE FALSE &lt;tibble&gt;</span></span>
<span><span class="co">#&gt; # ℹ 5 more variables: nrow &lt;int&gt;, min &lt;dbl&gt;, max &lt;dbl&gt;, t0 &lt;dttm&gt;, t1 &lt;dttm&gt;</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="adding-other-bits-of-information">Adding other bits of information<a class="anchor" aria-label="anchor" href="#adding-other-bits-of-information"></a>
</h2>
<p>If there are additional bits of information that may be useful for subsequent analyses, those can be added to the dataset using <code><a href="reference/add_info.html">add_info()</a></code>. A typical case is the appending of latlon coordinates. <code><a href="reference/add_info.html">add_info()</a></code> requires the presence of column names <code>site</code>, as information is added by site.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">env</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/add_info.html">add_info</a></span><span class="op">(</span></span>
<span>   <span class="va">env</span>,</span>
<span>   info <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>       treatment <span class="op">=</span> <span class="fl">1</span>,</span>
<span>       site <span class="op">=</span> <span class="st">"nozzz"</span>,</span>
<span>       lat <span class="op">=</span> <span class="fl">65</span>,</span>
<span>       lon <span class="op">=</span> <span class="fl">10</span></span>
<span>   <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">env</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"site"</span>, <span class="st">"lat"</span>, <span class="st">"lon"</span>, <span class="st">"treatment"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt; # A tibble: 4 × 5</span></span>
<span><span class="co">#&gt;   id         site    lat   lon treatment</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 nozzzmc01a nozzz    65    10         1</span></span>
<span><span class="co">#&gt; 2 nozzzmc02a nozzz    65    10         1</span></span>
<span><span class="co">#&gt; 3 nozzzmh01a nozzz    65    10         1</span></span>
<span><span class="co">#&gt; 4 nozzzmh02a nozzz    65    10         1</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="inspecting-data">Inspecting data<a class="anchor" aria-label="anchor" href="#inspecting-data"></a>
</h2>
<p>The <strong>envlogger</strong> package has built-in features that ensure that data can be confidently imported and joined together by logger serial and id. However, it is always good practice to inspect the data and look for loggers that may have malfunctioned in a way that cannot be detected automatically (e.g., readings have drifted but remain within a valid range) or for inconsistencies at the joining points. To make that process simpler, call <code><a href="reference/plot_env.html">plot_env()</a></code> with <code>dy = TRUE</code>, as that will produce an interactive dygraphs plot that can be zoomed and panned. Also, make sure to use the default <code>col_by = "sgmnt"</code>. This will ensure that data collected by the same logger (i.e., same serial) that is contained in different files get colored differently, facilitating the identification and inspection of joining points. After inspecting the data and confirming that no issues are present, you can confidently proceed with data analysis.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">env</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_env.html">read_env</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="reference/env_example.html">env_example</a></span><span class="op">(</span><span class="st">"ptzzy"</span><span class="op">)</span>, </span>
<span>  show_progress <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>  show_warnings <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">env</span> <span class="op">&lt;-</span> <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="va">env</span><span class="op">$</span><span class="va">report</span>, <span class="va">data</span><span class="op">)</span></span>
<span><span class="va">env</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">env</span>, <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/between.html" class="external-link">between</a></span><span class="op">(</span><span class="va">t</span>, </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="st">"2024-01-11"</span>, tz <span class="op">=</span> <span class="st">"UTC"</span><span class="op">)</span>, </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="st">"2024-01-14"</span>, tz <span class="op">=</span> <span class="st">"UTC"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/plot_env.html">plot_env</a></span><span class="op">(</span><span class="va">env</span>, dy <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co"># notice how ids ptzzymh01a and ptzzymc01a are represented by </span></span>
<span><span class="co">#  one green segment until Jan 12, and a purple segment afterwards </span></span>
<span><span class="co">#  (on Jan 12 data was downloaded and the logger memories erased, </span></span>
<span><span class="co">#  while data from that date onwards was downloaded at a later moment, </span></span>
<span><span class="co">#  leading to the entire dataset being contained in two separate files)</span></span></code></pre></div>
<p><img src="reference/figures/README-dyplot-printscreen.png" width="750px" style="display: block; margin: auto auto auto 0;"></p>
</div>
<div class="section level2">
<h2 id="summarising-and-visualizing">Summarising and Visualizing<a class="anchor" aria-label="anchor" href="#summarising-and-visualizing"></a>
</h2>
<p>The main goal of the <strong>envlogger</strong> package is to facilitate the importing and curating of large sets of EnvLogger data. Nevertheless, additional tools are provided for quickly summarising and visualizing large datasets. This is accomplished using the <code><a href="reference/summarise_env.html">summarise_env()</a></code> function and the ggplot2 options of <code><a href="reference/plot_env.html">plot_env()</a></code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># summarising often requires data at the exact same timestamps</span></span>
<span><span class="co"># to have that, we can provide a value for new_interval, which </span></span>
<span><span class="co">#  will result in all data being interpolated to that new time interval</span></span>
<span><span class="va">env</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_env.html">read_env</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="reference/env_example.html">env_example</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ptzzw"</span>, <span class="st">"ptzzy"</span>, <span class="st">"nozzz"</span><span class="op">)</span><span class="op">)</span>, </span>
<span>  new_interval  <span class="op">=</span> <span class="fl">60</span>,</span>
<span>  show_progress <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>  show_warnings <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">$</span><span class="va">report</span></span>
<span></span>
<span><span class="va">env</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/parse_id.html">parse_id_cctbon</a></span><span class="op">(</span><span class="va">env</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># compute daily q10, mean and q90 for each site</span></span>
<span><span class="va">env_summarised</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/summarise_env.html">summarise_env</a></span><span class="op">(</span></span>
<span>  <span class="va">env</span>, </span>
<span>  by_day <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>  by_site <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>  fun_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    ymin <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">0.1</span><span class="op">)</span>,</span>
<span>    temp <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>,</span>
<span>    ymax <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">0.9</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/plot_env.html">plot_env</a></span><span class="op">(</span><span class="va">env_summarised</span>, gg_ribbon <span class="op">=</span> <span class="cn">TRUE</span>, col_by <span class="op">=</span> <span class="st">"site"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-plot2-1.png" width="100%"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># apply a rolling monthly average to each stat</span></span>
<span><span class="va">env_roll</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/summarise_env.html">summarise_env</a></span><span class="op">(</span></span>
<span>  <span class="va">env</span>, </span>
<span>  by_day <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>  by_site <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>  fun_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    ymin <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">0.1</span><span class="op">)</span>,</span>
<span>    temp <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>,</span>
<span>    ymax <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">0.9</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>  roll_days <span class="op">=</span> <span class="fl">30</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/plot_env.html">plot_env</a></span><span class="op">(</span><span class="va">env_roll</span>, gg_ribbon <span class="op">=</span> <span class="cn">TRUE</span>, col_by <span class="op">=</span> <span class="st">"site"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-plot3-1.png" width="100%"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/ruiseabra/envlogger/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/ruiseabra/envlogger/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing envlogger</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Rui Seabra <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-0240-3992" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Fernando Lima <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-9575-9834" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>



  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Rui Seabra, Fernando Lima.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer>
</div>






  </body>
</html>
