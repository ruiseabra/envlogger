<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Add latlon coordinates or other info to an EnvLogger tibble — add_info • envlogger</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Add latlon coordinates or other info to an EnvLogger tibble — add_info"><meta property="og:description" content="Joins latlon or other relevant information to an EnvLogger tibble resulting from a call to read_env(). Information is joined by location name, so, unless the logger ids used originally code for location name only, a call to parse_id() will be required to generate a column that specifically codes for location name. Those same location names have to be used here."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">envlogger</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ruiseabra/envlogger/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add latlon coordinates or other info to an EnvLogger tibble</h1>
    <small class="dont-index">Source: <a href="https://github.com/ruiseabra/envlogger/blob/HEAD/R/augment_info.R" class="external-link"><code>R/augment_info.R</code></a></small>
    <div class="hidden name"><code>add_info.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Joins latlon or other relevant information to an EnvLogger tibble resulting from a call to <code><a href="read_env.html">read_env()</a></code>. Information is joined by location name, so, unless the logger ids used originally code for location name only, a call to <code><a href="parse_id.html">parse_id()</a></code> will be required to generate a column that specifically codes for location name. Those same location names have to be used here.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">add_info</span><span class="op">(</span><span class="va">env</span>, <span class="va">info</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-env">env<a class="anchor" aria-label="anchor" href="#arg-env"></a></dt>
<dd><p>The output of a call to <code><a href="read_env.html">read_env()</a></code> (either directly, of the <code>$report</code> element). Likely, a call to <code><a href="parse_id.html">parse_id()</a></code> will also be required to isolate the location name component from the logger ids.</p></dd>


<dt id="arg-info">info<a class="anchor" aria-label="anchor" href="#arg-info"></a></dt>
<dd><p>A data.frame (or tibble) providing location names, latlon coordinates, and any additional information to be joined to <code>env</code>. The column coding for location names must be strictly named <code>site</code>, and must be present. Columns coding for latitude and longitude, if included, must be strictly named <code>lat</code> and <code>lon</code>, not <code>long</code>, <code>longitude</code> or <code>x,y</code>. All additional columns are retained and joined (any column name matching to colnames in <code>env</code> will receive the suffix <code>x_</code>).</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>The same structure provided as input (<code>env</code>), augmented with new columns resulting from the joining of the information provided.</p>
    </div>
    <div id="why-use-add-info-to-set-latlon">
    <h2>Why use <code>add_info()</code> to set latlon</h2>


<p>Since EnvLogger data reports include latitude and longitude, it is reasonable to wonder why the <a href="envlogger-package.html">envlogger-package</a> doesn't collect latlon info from that source. In fact, the latitude and longitude provided in EnvLogger reports is there to potentially facilitate troubleshooting, in case the location of origin of a data report is uncertain due to failure to set meaningful custom logger ids and similar issues. This is because there are many scenarios that can lead to the latlon data stored in the data report files being inaccurate or absent. For example, the smartphone used to download the data has just been turned on, a GPS fix may not yet have been available when the data was downloaded, or may be highly inaccurate. The same happens if the loggers have being deployed in a location where GPS coverage is low or absent (underwater, inside of a cave, in an urban setting, etc.). On top of that, depending on the accuracy of the devices used during each download session (and whether there's only one device being used or multiple), potentially resulting in significant differences between the coordinates recorded on each file retrieved on the same day and from the same site.</p>
<p>With all this in mind, sourcing latlon from the data report files would be too unreliable. On top of that, users typically maintain a registry of which loggers have been deployed and where, and that is a much more trustworthy and stable source of information for site geographic coordinates. It is in this context that <code>add_info()</code> is provided, as a way to streamline the merging of the logger data imported with the curated location information.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="read_env.html">read_env()</a></code>, <code><a href="parse_id.html">parse_id()</a></code>, <code><a href="summarise_env.html">summarise_env()</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">env</span> <span class="op">&lt;-</span> <span class="fu"><a href="read_env.html">read_env</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>   <span class="fu"><a href="env_example.html">env_example</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ptzzy"</span>, <span class="st">"ptzzw"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   new_interval <span class="op">=</span> <span class="fl">60</span>,</span></span>
<span class="r-in"><span>   show_progress <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>   show_warnings <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">env</span> <span class="op">&lt;-</span> <span class="fu"><a href="parse_id.html">parse_id_cctbon</a></span><span class="op">(</span><span class="va">env</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">add_info</span><span class="op">(</span></span></span>
<span class="r-in"><span>   <span class="va">env</span>,</span></span>
<span class="r-in"><span>   info <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>       var1 <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,</span></span>
<span class="r-in"><span>       var3 <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,</span></span>
<span class="r-in"><span>       site <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ptzzy"</span>, <span class="st">"ptzzw"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>       var2 <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,</span></span>
<span class="r-in"><span>       lat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">36</span>, <span class="fl">40</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>       lon <span class="op">=</span> <span class="op">-</span><span class="fl">10</span>,</span></span>
<span class="r-in"><span>       var4 <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,</span></span>
<span class="r-in"><span>       exp <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 8 × 24</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id    serial site  lvl   exp    rep1 rep2    lat   lon type  v_log press hum  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> ptzz… 04ad … ptzzw m     c         1 a        40   -<span style="color: #BB0000;">10</span> t     7.3   FALSE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> ptzz… 04b4 … ptzzw m     c         2 a        40   -<span style="color: #BB0000;">10</span> t     7.3   FALSE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> ptzz… 04d3 … ptzzw m     h         1 a        40   -<span style="color: #BB0000;">10</span> t     7.3   FALSE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> ptzz… 0449 … ptzzw m     h         2 a        40   -<span style="color: #BB0000;">10</span> t     7.3   FALSE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> ptzz… 04ce … ptzzy m     c         1 a        36   -<span style="color: #BB0000;">10</span> t     2.4   FALSE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> ptzz… 04cb … ptzzy m     c         2 a        36   -<span style="color: #BB0000;">10</span> t     2.4   FALSE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">7</span> ptzz… 04dc … ptzzy m     h         1 a        36   -<span style="color: #BB0000;">10</span> t     2.4   FALSE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">8</span> ptzz… 04cb … ptzzy m     h         2 a        36   -<span style="color: #BB0000;">10</span> t     2.4   FALSE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 11 more variables: data &lt;list&gt;, nrow &lt;dbl&gt;, min &lt;dbl&gt;, max &lt;dbl&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   t0 &lt;dttm&gt;, t1 &lt;dttm&gt;, var1 &lt;int&gt;, var3 &lt;int&gt;, var2 &lt;int&gt;, var4 &lt;int&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   x_exp &lt;int&gt;</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Rui Seabra, Fernando Lima.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer></div>






  </body></html>

