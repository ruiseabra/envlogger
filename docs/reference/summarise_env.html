<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Group EnvLogger data by id elements and summarise it — summarise_env • envlogger</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Group EnvLogger data by id elements and summarise it — summarise_env"><meta property="og:description" content="Takes an EnvLogger tibble resulting from a call to read_env(), groups data by grouping variables and summarises it. In the simplest case, grouping is only done along time (by_day). However, if logger ids have been broken into id elements with parse_id() or parse_id_cctbon(), grouping can also be done across id elements. For example, if data follows the CCTBON naming scheme, data can be grouped by site, lvl (shore height level) or exp (exposure to solar radiation). This function exists mainly to condition data for plot_env(), but can also be useful by itself.
Note that summarise_env can be called on the output of a previous call to summarise_env, allowing, for example, for first computing daily maximums, and then on a second call, to request an average of those daily maximums across all loggers sharing the same microhabitat."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">envlogger</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ruiseabra/envlogger/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Group EnvLogger data by id elements and summarise it</h1>
    <small class="dont-index">Source: <a href="https://github.com/ruiseabra/envlogger/blob/HEAD/R/summarise.R" class="external-link"><code>R/summarise.R</code></a></small>
    <div class="hidden name"><code>summarise_env.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Takes an EnvLogger tibble resulting from a call to <code><a href="read_env.html">read_env()</a></code>, groups data by grouping variables and summarises it. In the simplest case, grouping is only done along time (<code>by_day</code>). However, if logger ids have been broken into id elements with <code><a href="parse_id.html">parse_id()</a></code> or <code><a href="parse_id.html">parse_id_cctbon()</a></code>, grouping can also be done across id elements. For example, if data follows the CCTBON naming scheme, data can be grouped by <code>site</code>, <code>lvl</code> (shore height level) or <code>exp</code> (exposure to solar radiation). This function exists mainly to condition data for <code><a href="plot_env.html">plot_env()</a></code>, but can also be useful by itself.</p>
<p>Note that <code>summarise_env</code> can be called on the output of a previous call to <code>summarise_env</code>, allowing, for example, for first computing daily maximums, and then on a second call, to request an average of those daily maximums across all loggers sharing the same microhabitat.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">summarise_env</span><span class="op">(</span></span>
<span>  <span class="va">env</span>,</span>
<span>  var <span class="op">=</span> <span class="st">"temp"</span>,</span>
<span>  fun_list <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  by_day <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  by_site <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  by_group <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  site <span class="op">=</span> <span class="st">"site"</span>,</span>
<span>  group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lvl"</span>, <span class="st">"exp"</span><span class="op">)</span>,</span>
<span>  same_days <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  roll_days <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  by_day_lim <span class="op">=</span> <span class="fl">50</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-env">env<a class="anchor" aria-label="anchor" href="#arg-env"></a></dt>
<dd><p>The output of a call to <code><a href="read_env.html">read_env()</a></code> (either directly, of the <code>$report</code> element). Additionally, a call to <code><a href="parse_id.html">parse_id()</a></code> or <code><a href="add_info.html">add_info()</a></code> ensures more grouping options. In alternative, the output of a call to <code>summarise_env</code>.</p></dd>


<dt id="arg-var">var<a class="anchor" aria-label="anchor" href="#arg-var"></a></dt>
<dd><p>The name of a single column over which the function(s) in <code>fun_list</code> will be applied. Defaults to <code>temp</code>. Can also be set to <code>hum</code> or <code>press</code> if wanting to summarise using humidity or pressure data, respectively. Can also be any other name, as long as it exists as colnames and codes for a data type that will result in a single numeric value when processed by all functions provided in <code>fun_list</code>.</p></dd>


<dt id="arg-fun-list">fun_list<a class="anchor" aria-label="anchor" href="#arg-fun-list"></a></dt>
<dd><p>Named list with one or more functions to be applied to <code>var</code>. Each function must return a single numeric value. The names of the columns derived from applying the functions provided are taken from the names of <code>fun_list</code>. If <code>fun</code> has no names, generic names are generated. If not provided, the following stats are computed: min, q10 (10th quantile), q25, average, q50, q75, q90 and max.</p></dd>


<dt id="arg-by-day">by_day<a class="anchor" aria-label="anchor" href="#arg-by-day"></a></dt>
<dd><p>Whether to summarise values daily or at the native sampling interval.</p></dd>


<dt id="arg-by-site">by_site<a class="anchor" aria-label="anchor" href="#arg-by-site"></a></dt>
<dd><p>Whether to group by <code>site</code>.</p></dd>


<dt id="arg-by-group">by_group<a class="anchor" aria-label="anchor" href="#arg-by-group"></a></dt>
<dd><p>Whether to group by <code>group</code>.</p></dd>


<dt id="arg-site">site<a class="anchor" aria-label="anchor" href="#arg-site"></a></dt>
<dd><p>The name of the column that codes for site. If a vector with more than one element, elements are combined to form a new column by pasting values together. Only relevant if <code>by_site = TRUE</code>. Can be omitted if data follows the CCTBON naming scheme.</p></dd>


<dt id="arg-group">group<a class="anchor" aria-label="anchor" href="#arg-group"></a></dt>
<dd><p>One or more column names to combine as a grouping factor. If a vector with more than one element, elements are combined to form a new column by pasting values together. Only relevant if <code>by_group = TRUE</code>. Can be omitted if data follows the CCTBON naming scheme (in which case <code>lvl</code> and <code>exp</code> are used).</p></dd>


<dt id="arg-same-days">same_days<a class="anchor" aria-label="anchor" href="#arg-same-days"></a></dt>
<dd><p>Should the output only include data for days for which all distinct grouping ids (site + group) have data?</p></dd>


<dt id="arg-roll-days">roll_days<a class="anchor" aria-label="anchor" href="#arg-roll-days"></a></dt>
<dd><p>Compute a rolling mean over the x days before each data point. If <code>0</code> (default), no rolling mean is applied.</p></dd>


<dt id="arg-by-day-lim">by_day_lim<a class="anchor" aria-label="anchor" href="#arg-by-day-lim"></a></dt>
<dd><p>Maximum number (in thousands) of collective rows accepted when <code>by_day = FALSE</code>. If the aggregate number of rows exceeds this value, <code>by_day</code> will be automatically set to <code>TRUE</code>. This is to prevent an unintentional call requesting the computation of summary stats over datasets that are too large, a situation that may lead to R stalling.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A tibble with unnested data containing all the combinations of <code>id</code> and <code>t</code> (time), as well as <code>site</code> and <code>group</code> if <code>by_site = TRUE</code> and <code>by_group</code> = TRUE, respectively, along with as many data summary columns as the number of functions provided using <code>fun_list</code>.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="read_env.html">read_env()</a></code>, <code><a href="parse_id.html">parse_id()</a></code>, <code><a href="add_info.html">add_info()</a></code>, <code><a href="plot_env.html">plot_env()</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">env</span> <span class="op">&lt;-</span> <span class="fu"><a href="read_env.html">read_env</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>   <span class="fu"><a href="env_example.html">env_example</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ptzzy"</span>, <span class="st">"ptzzw"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   new_interval <span class="op">=</span> <span class="fl">60</span>,</span></span>
<span class="r-in"><span>   show_progress <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>   show_warnings <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">env</span> <span class="op">&lt;-</span> <span class="fu"><a href="parse_id.html">parse_id_cctbon</a></span><span class="op">(</span><span class="va">env</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># daily max for each logger</span></span></span>
<span class="r-in"><span><span class="va">daily_max</span> <span class="op">&lt;-</span> <span class="fu">summarise_env</span><span class="op">(</span></span></span>
<span class="r-in"><span>   <span class="va">env</span>,</span></span>
<span class="r-in"><span>   var <span class="op">=</span> <span class="st">"temp"</span>,</span></span>
<span class="r-in"><span>   fun_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>max <span class="op">=</span> <span class="va">max</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   by_day <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span>   <span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">daily_max</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 3,635 × 9</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    id         site  lvl   exp    rep1 rep2  sgmnt t                     max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> ptzzymc01a ptzzy m     c         1 a     1a    2023-04-01 <span style="color: #949494;">00:00:00</span>  16.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> ptzzymc02a ptzzy m     c         2 a     1a    2023-04-01 <span style="color: #949494;">00:00:00</span>  16.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> ptzzymh01a ptzzy m     h         1 a     1a    2023-04-01 <span style="color: #949494;">00:00:00</span>  17.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> ptzzymh02a ptzzy m     h         2 a     1a    2023-04-01 <span style="color: #949494;">00:00:00</span>  17.0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> ptzzymc01a ptzzy m     c         1 a     1a    2023-04-02 <span style="color: #949494;">00:00:00</span>  16.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> ptzzymc02a ptzzy m     c         2 a     1a    2023-04-02 <span style="color: #949494;">00:00:00</span>  16.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> ptzzymh01a ptzzy m     h         1 a     1a    2023-04-02 <span style="color: #949494;">00:00:00</span>  19.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> ptzzymh02a ptzzy m     h         2 a     1a    2023-04-02 <span style="color: #949494;">00:00:00</span>  19.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> ptzzymc01a ptzzy m     c         1 a     1a    2023-04-03 <span style="color: #949494;">00:00:00</span>  15.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> ptzzymc02a ptzzy m     c         2 a     1a    2023-04-03 <span style="color: #949494;">00:00:00</span>  15.7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 3,625 more rows</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># daily minimum, average and maximum daily_max for each site</span></span></span>
<span class="r-in"><span><span class="fu">summarise_env</span><span class="op">(</span></span></span>
<span class="r-in"><span>   <span class="va">daily_max</span>,</span></span>
<span class="r-in"><span>   var <span class="op">=</span> <span class="st">"max"</span>,</span></span>
<span class="r-in"><span>   fun_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>       dmax_min <span class="op">=</span> <span class="va">min</span>,</span></span>
<span class="r-in"><span>       dmax_avg <span class="op">=</span> <span class="va">mean</span>,</span></span>
<span class="r-in"><span>       dmax_max <span class="op">=</span> <span class="va">max</span>,</span></span>
<span class="r-in"><span>       sd <span class="op">=</span> <span class="va">sd</span></span></span>
<span class="r-in"><span>       <span class="op">)</span>,</span></span>
<span class="r-in"><span>   by_day <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>   by_site <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>   same_days <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span>   <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 782 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    id    site  t                   dmax_min dmax_avg dmax_max    sd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> ptzzw ptzzw 2023-04-30 <span style="color: #949494;">00:00:00</span>     23.2     28.4     34.3  6.03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> ptzzy ptzzy 2023-04-30 <span style="color: #949494;">00:00:00</span>     17.1     18.8     20.6  1.56</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> ptzzw ptzzw 2023-05-01 <span style="color: #949494;">00:00:00</span>     23.2     28.1     32.6  4.97</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> ptzzy ptzzy 2023-05-01 <span style="color: #949494;">00:00:00</span>     16.6     18.5     19.7  1.41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> ptzzw ptzzw 2023-05-02 <span style="color: #949494;">00:00:00</span>     22.8     25.2     27.5  2.60</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> ptzzy ptzzy 2023-05-02 <span style="color: #949494;">00:00:00</span>     16.4     19.3     21.6  2.68</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> ptzzw ptzzw 2023-05-03 <span style="color: #949494;">00:00:00</span>     23.4     26.6     28.9  2.62</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> ptzzy ptzzy 2023-05-03 <span style="color: #949494;">00:00:00</span>     16.5     18.8     21.6  2.67</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> ptzzw ptzzw 2023-05-04 <span style="color: #949494;">00:00:00</span>     22.8     26.4     29.0  2.92</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> ptzzy ptzzy 2023-05-04 <span style="color: #949494;">00:00:00</span>     17.2     19.7     22.3  2.66</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 772 more rows</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Rui Seabra, Fernando Lima.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer></div>






  </body></html>

